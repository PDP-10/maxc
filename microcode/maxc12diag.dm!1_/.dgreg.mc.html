<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [Indigo]&lt;Maxc>maxc12diag.dm!1>dgreg.mc</title>
  </head>
  <body>
    <pre>
ER[DGREG];%TO ASSEMBLE:	@MI@ DGREGTO RUN:		MIDAS DGREG		START;GTHIS DIAGNOSTIC TESTS ASSORTED REGISTERS WITH RANDOM NUMBERS.  DGBASIC ANDDGP MUST WORK BEFORE THIS IS TRIED.  PROBABLY DGRL, DGALU, DGIMH, AND DGIMLSHOULD BE TESTED FIRST, BUT NOT NECESSARILY.THE DIAGNOSTIC PERMITS INDIVIDUAL REGISTERS TO BE TESTED IN A LOOP BYMANUALLY LOADING Y WITH 777 AND STARTING AT THE APPROPRIATE PLACE.%SM[SLC,0]; RM[RLC,0]; LM[LLC,10];TARGET[SLC];400000 000000V;	200000 000000V;	100000 000000V; 40000 000000V;	 20000 000000V;	 10000 000000V;  4000 000000V;	  2000 000000V;	  1000 000000V;   400 000000V;	   200 000000V;	   100 000000V;    40 000000V;	    20 000000V;	    10 000000V;     4 000000V;	     2 000000V;	     1 000000V;400000V;		200000V;		100000V; 40000V;		 20000V;		 10000V;  4000V;		  2000V;		  1000V;   400V;		   200V;		   100V;    40V;		    20V;		    10V;     4V;		     2V;		     1V;-1S: 777777 777777V;RV[X0,7654321];RV[X1,76543210];RV[X2,765432100];RV[X3,7654321000];RV[X4,76543210000];RV[X5,765432100000];RV[X6,654321000007];RV[X7,543210000076];LVN[RAN]; LVN[RRAN]; LVN[XRAN]; LVN[COUNT];LVN[TEMP]; RVN[RTEMP]; RVN[ICOUNT];LVN[LDATA]; RV[LMASK,777777 777777]; LVN[LBASE];RVN[RDATA]; LV[RMASK,777777 777777]; RVN[RBASE];RV[WLOOK,0]; RV[RLOOK,0];SVN[ADDR]; SVN[STEMP]; SVN[STEMP1]; RV[AINC,1];IM[ILC,0]; TARGET[ILC];REPEAT[20,ILC[BRKP[1]]];MCYCLE:	BRKP[1], COUNT&larr;P+1, GOTO[LOOP];START:	ARM&larr;NULL, INHINT;	IRET, INHINT, COUNT&larr;A0, GOTO[LOOP];PQCOMP:	P#Q;	RETURN[ALU=0];CBRK:	BRKP[1], RETURN;*RETURN RANDOM NO. IN Q AND RAN*(USES X WHICH MUST NOT BE CLOBBERED), CLOBBERS PRGEN:	P&larr;RAN, Q&larr;RX, GOTO[RGEN1,X&gt;=0];	Q&larr;X7, DGOTO[6];	X&larr;NPC, RAN&larr;X7&larr;Q&larr;P+Q, RETURN;RGEN1:	RX&larr;RAN&larr;Q&larr;P+Q, DECX, RETURN;*SAVE RANDOM NO. GEN. STATE IN LM FOR RESTORATION LATER.  RETURN RANDOM NO. IN Q.RMARK:	P&larr;X, DGOTO[7], Q&larr;RAN;	X&larr;NPC, RRAN&larr;Q, GOTO[.+1];	Q&larr;RX, XRAN&larr;P, GOTO[.+2,X&lt;0];	LX&larr;Q, DECX, GOTO[.-1];PXRET:	X&larr;P, Q&larr;RAN, GOTO[RGEN];*RESTORE RANDOM NO. GEN FROM LMRREST:	P&larr;RRAN, DGOTO[7];	X&larr;NPC, RAN&larr;P, GOTO[.+1];	Q&larr;LX, GOTO[PXRET,X&lt;0];	RX&larr;Q, P&larr;XRAN, DECX, GOTO[.-1];*START HERE--USE Y&lt;0 TO INDICATE REPEATED ITERATIONS.  SET Y &gt; 0 TO*CAUSE REPEATED ITERATION OF ONE TESTLOOP:	Y&larr;NULL;*~ MAXC2 ONLY	CALL[EREGSM];	CALL[EREGQ];	CALL[EREGALU];*~	CALL[FPTEST];	CALL[FQTEST];	CALL[SETSFF];	CALL[SETSFT];	P&larr;COUNT, GOTO[MCYCLE];*~ MAXC2 ONLY*READ AND WRITE EREG FROM SM USING RANDOM DATAEREGSM:	CALL[RGEN];	STEMP&larr;Q;	B&larr;NOT Q;	B&larr;STEMP, SIGNOVA, DGOTO[EREGSM,Y&lt;0];	P&larr;EREG, CALL[PQCOMP];	RETURN;*READ AND WRITE EREG FROM Q USING RANDOM DATAEREGQ:	CALL[RGEN];	B&larr;NOT Q;	B&larr;Q, SIGNOVA, DGOTO[EREGQ,Y&lt;0];	P&larr;EREG, CALL[PQCOMP];	RETURN;*READ AND WRITE EREG FROM ALU USING RANDOM DATAEREGALU: CALL[RGEN];	B&larr;Q&larr;NOT Q, SIGNOVA, DGOTO[EREGALU,Y&lt;0];	P&larr;EREG, CALL[PQCOMP];	RETURN;*SET AND CLEAR F FROM STEMP USING RANDOM DATA*(READS F INTO P WHICH HAS AN EARLY -K1 LOADING CLOCK)FPTEST:	CALL[RGEN];	STEMP&larr;Q;	CLEARF[STEMP], MDR&larr;P&larr;FLAGS;	Q&larr;P AND NOT Q, KMDR&larr;P&larr;FLAGS, CALL[PQCOMP];	*CLEARF FAILED	CALL[RGEN];	STEMP&larr;Q;	SETF[STEMP], MDR&larr;P&larr;FLAGS;	Q&larr;P OR Q, KMDR&larr;P&larr;FLAGS, CALL[PQCOMP];		*SETF FAILED	Q&larr;37 777777L, P&larr;FLAGS, DGOTO[FPTEST,Y&lt;0];	Q&larr;P AND NOT Q, P&larr;TENF, CALL[PQCOMP];		*TENF FAILED	RETURN;*SET AND CLEAR F FROM STEMP USING RANDOM DATA*(READS F INTO Q WHICH HAS A LATE -K1 LOADING CLOCK)FQTEST:	CALL[RGEN];	STEMP&larr;Q;	CLEARF[STEMP], MDR&larr;Q&larr;FLAGS, P&larr;Q;	P&larr;NOT P AND Q, KMDR&larr;Q&larr;FLAGS, CALL[PQCOMP];	*CLEARF FAILED	CALL[RGEN];	STEMP&larr;Q;	SETF[STEMP], P&larr;Q, MDR&larr;Q&larr;FLAGS;	P&larr;P OR Q, KMDR&larr;Q&larr;FLAGS, CALL[PQCOMP];		*SETF FAILED	P&larr;A1, SAMASK[27], DGOTO[FPTEST,Y&lt;0];	P&larr;NOT P AND Q, Q&larr;TENF, CALL[PQCOMP];		*TENF FAILED	RETURN;*~*! MAXC1 ONLYFPTEST:	CALL[RGEN];	STEMP&larr;Q;	CLEARF[STEMP], MDR&larr;P&larr;NOT F;	Q&larr;P OR Q, KMDR&larr;P&larr;NOT F, CALL[PQCOMP];		*CLEARF FAILED	CALL[RGEN];	STEMP&larr;Q;	SETF[STEMP], MDR&larr;P&larr;NOT F, DGOTO[FPTEST,Y&lt;0];	Q&larr;P AND NOT Q, KMDR&larr;P&larr;NOT F, CALL[PQCOMP];	*SETF FAILED	RETURN;FQTEST:	CALL[RGEN];	STEMP&larr;Q;	CLEARF[STEMP], MDR&larr;Q&larr;NOT F, P&larr;Q;	P&larr;P OR Q, KMDR&larr;Q&larr;NOT F, CALL[PQCOMP];		*CLEARF FAILED	CALL[RGEN];	STEMP&larr;Q;	SETF[STEMP], P&larr;Q, MDR&larr;Q&larr;NOT F, DGOTO[FQTEST,Y&lt;0];	P&larr;NOT P AND Q, KMDR&larr;Q&larr;NOT F, CALL[PQCOMP];	*SETF FAILED	RETURN;*!*TEST SETSF WITH RANDOM NUMBERS--TEST ALWAYS FALSESETSFF:	CLEARF[-1S], CALL[RGEN];	STEMP&larr;Q;	SETF[STEMP], Q&larr;NOT Q;	STEMP&larr;Q;*~ MAXC2 ONLY	Q&larr;FLAGS, P&larr;Q, AMASK[4], SETSF[STEMP], DGOTO[SETSFF,Y&lt;0];	Q&larr;NOT P AND Q, P&larr;FLAGS, CALL[PQCOMP];*~*! MAXC1 ONLY	Q&larr;NOT F, P&larr;Q, AMASK[4], SETSF[STEMP], DGOTO[SETSFF,Y&lt;0];	Q&larr;P OR Q, P&larr;NOT F, CALL[PQCOMP];*!	RETURN;*CYCLE THROUGH THE VARIOUS BITS IN F TESTING SETSF ON THAT BIT WITH*RANDOM VALUES FOR G, H, J, AND KSETSFT:	MDR&larr;Y;		*PRESERVE Y DURING TESTSETST1:	Y&larr;NULL, CALL[SETSFY];		*ADDRESS TABLE OF 2&uarr;N IN SM	INCY, DGOTO[.];	P&larr;40R, Q&larr;Y, CALL[.+1];	P-Q;	GOTO[SETSFY,ALU&gt;0];		*RETURNS TO .-3	Y&larr;MDR, POP, DGOTO[SETST1];	RETURN[Y&gt;=0];*TEST SETSF WITH RANDOM NUMBERS--TEST ALWAYS TRUE ON BIT SY ONLY*RANDOM BITS IN G, H, J, AND KSETSFY:	CLEARF[-1S], CALL[RGEN];	Q&larr;(Q) U (SY);	STEMP&larr;Q;	SETF[STEMP], CALL[RGEN];	P&larr;Q, BAMASK[4], Q&larr;SY;	Q&larr;P OR Q;	STEMP&larr;Q;*~ MAXC2 ONLY	SETSF[STEMP], Q&larr;FLAGS;	P&larr;P OR Q, Q&larr;FLAGS, GOTO[PQCOMP];*~*! MAXC1 ONLY	SETSF[STEMP], Q&larr;NOT F;	P&larr;NOT P AND Q, Q&larr;NOT F, GOTO[PQCOMP];*!</pre>
  </body>
</html>
