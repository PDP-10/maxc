<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [Indigo]&lt;Maxc>maxc12diag.dm!1>dgmr.mc</title>
  </head>
  <body>
    <pre>
ER[DGMR];	*RANDOM NO. TEST FOR MAIN MEMORY TO FIND BAD CHIPS%TO ASSEMBLE:	MICRO/L LANG DGMRTO RUN:		MIDAS RDGMR		SET "MLOW" AND "MHIGH" TO BRACKET THE MEMORY REGION		SET "RLOOK" (READS) AND "WLOOK" (WRITES) TO CAUSE "SIGNOVA"		SET "AINC" TO THE ADDRESS INCREMENT		START;G"DGMR" TESTS SEQUENTIAL ADDRESSES FROM "MLOW" TO "MHIGH" USING RANDOMDATA IN TOP 36 BITS AND COMPLEMENT OF THAT IN LOW 4 BITS.  "SIGNOVA"IS GENERATED ON WRITES WHEN "WLOOK" = "ADDR" AND F2[3] ON READS WHEN"RLOOK" = "ADDR".  "MASK" AND "MASKL" DETERMINE THE BITS CHECKED ONDATA COMPARISON.  AT ERRORS, "MAR" CONTAINS THE ADDRESS, "MDR" AND "MDRL"THE DATA READ, AND "DATA" AND "DATAL" THE EXPECTED DATA VALUES.WHEN "AINC" # 1, BE SURE THAT "MHIGH" POINTS TO THE LARGEST ADDRESSACTUALLY WRITTEN (NOT IN THE GAP BETWEEN ADDRESSES)."DGM" SHOULD WORK BEFORE THIS IS TRIED.THE NORMAL ENTRY "START" USES THE PROCESSOR MEMORY INTERFACE FOR TESTING.ALTERNATE ENTRY "KSTART" USES THE DISK MEMORY INTERFACE FOR TESTING.%SM[SLC,20]; RM[RLC,0]; LM[LLC,10];RV[X0,7654321];RV[X1,76543210];RV[X2,765432100];RV[X3,7654321000];RV[X4,76543210000];RV[X5,765432100000];RV[X6,654321000007];RV[X7,543210000076];LVN[RAN]; LVN[RRAN]; LVN[XRAN]; LVN[COUNT];LVN[DATA]; LV[MASK,777777 777777]; RVN[DATAL]; RV[MASKL,17];LV[WLOOK,10000000]; LV[RLOOK,10000000];LV[MHIGH,777777]; LV[MLOW,0]; SVN[ADDR]; SVN[COUNT]; RV[AINC,1];TARGET[ILC];REPEAT[20,ILC[(BRKP[1]FRZBALUBC)]];MCYCLE:	BRKP[1], Q&larr;P+1, RETURN;START:	COUNT&larr;ARM&larr;NULL, INHINT;	IRET, INHINT, CALL[INIRAN];	Q&larr;COUNT, GOTO[LOOP];PQZT:	P AND Q, GOTO[.+2];PQCOMP:	P#Q;	RETURN[ALU=0];	BRKP[1], RETURN;RETN:	RETURN;*INITIALIZE RANDOM NO. GEN.INIRAN:	DGOTO[7], Q&larr;X7;	X&larr;NPC, RAN&larr;Q, RETURN;*SAVE RANDOM NO. GEN. STATE IN LM FOR RESTORATION LATERRMARK:	P&larr;X, DGOTO[7], Q&larr;RAN;	X&larr;NPC, GOTO[.+1], RRAN&larr;Q;	Q&larr;RX, GOTO[.+2,X&lt;0], XRAN&larr;P;	LX&larr;Q, DECX, GOTO[.-1];PXRET:	X&larr;P, RETURN;*RESTORE RANDOM NO. GEN FROM LMRREST:	P&larr;RRAN, DGOTO[7];	X&larr;NPC, RAN&larr;P, GOTO[.+1];	Q&larr;LX, GOTO[PXRET,X&lt;0];	RX&larr;Q, P&larr;XRAN, DECX, GOTO[.-1];*SEQUENCE THAT USES PROCESSOR'S MEMORY INTERFACE FOR TESTING.LOOP:	COUNT&larr;Q, CALL[RGEN];	Q&larr;MLOW;	ADDR&larr;Q, CALL[RMARK];	*SAVE INITIAL STATE OF RANDOM NO. GEN.	CALL[RGEN];WRANM:	MDR&larr;Q, DATAL&larr;NOT Q;	WRITE&larr;Q&larr;ADDR, P&larr;WLOOK, INHINT;	P#Q, Q&larr;DATAL, INHINT;	MDRL&larr;Q, GOTO[.+2,ALU#0];	SIGNOVA, P&larr;ADDR, Q&larr;MHIGH, GOTO[.+2]; *SCOPE TRIGGER FOR ADDR=WLOOK	P&larr;ADDR, Q&larr;MHIGH;	P-Q, Q&larr;AINC;	Q&larr;P+Q, DGOTO[WRANM,ALU&lt;0];	ADDR&larr;Q, CALL[RGEN];*NOW READ AND COMPARE	Q&larr;MLOW;	ADDR&larr;Q, CALL[RREST];	CALL[RGEN];RRANM:	DATA&larr;Q;	READ&larr;P&larr;ADDR, DATAL&larr;NOT Q, Q&larr;RLOOK;	P#Q, Q&larr;MHIGH;	P-Q, Q&larr;AINC, GOTO[.+2,ALU#0];	FRZBALUBC, F2[3];	*SCOPE TRIGGER FOR ADDR=RLOOK IS F2[3]	Q&larr;P+Q, DGOTO[RRANM,ALU&lt;0];	ADDR&larr;Q, CALL[.+3];	DGOTO[LOOP];	P&larr;COUNT, CALL[MCYCLE];	Q&larr;MDR, P&larr;DATA;	P&larr;P#Q, Q&larr;MASK, CALL[PQZT];	*TOP 36 BITS WRONG	Q&larr;MDRL, P&larr;DATAL;	P&larr;P#Q, Q&larr;MASKL, CALL[PQZT];	*LOW 4 BITS WRONG*RETURN RANDOM NO. IN Q (USES X WHICH MUST NOT BE CLOBBERED), CLOBBERS PRGEN:	P&larr;RAN, Q&larr;RX, GOTO[RGEN1,X&gt;=0];	DGOTO[6], Q&larr;X7;	X&larr;NPC, RAN&larr;X7&larr;Q&larr;P+Q, RETURN;RGEN1:	RX&larr;RAN&larr;Q&larr;P+Q, DECX, RETURN;*SEQUENCE THAT USES THE DISK MEMORY INTERFACE FOR TESTING.KSTART:	COUNT&larr;ARM&larr;NULL, INHINT;	IRET, INHINT, CALL[INIRAN];	Q&larr;COUNT, GOTO[KLOOP];KLOOP:	COUNT&larr;Q, CALL[RGEN];	Q&larr;MLOW;	ADDR&larr;Q, CALL[RMARK];	*SAVE INITIAL STATE OF RANDOM NO. GEN.	CALL[RGEN];KWRANM:	MDR&larr;Q, DATAL&larr;NOT Q;	WRITE&larr;Q&larr;ADDR, P&larr;WLOOK, INHINT;	P#Q, Q&larr;DATAL, INHINT;	MDRL&larr;Q, GOTO[.+2,ALU#0];	SIGNOVA, P&larr;ADDR, Q&larr;MHIGH, GOTO[.+2]; *SCOPE TRIGGER FOR ADDR=WLOOK	P&larr;ADDR, Q&larr;MHIGH;	P-Q, Q&larr;AINC;	Q&larr;P+Q, DGOTO[KWRANM,ALU&lt;0];	ADDR&larr;Q, CALL[RGEN];*NOW READ AND COMPARE	Q&larr;MLOW;	ADDR&larr;Q, CALL[RREST];	CALL[RGEN];KRRANM:	DATA&larr;Q;	READ&larr;P&larr;ADDR, DATAL&larr;NOT Q, Q&larr;RLOOK;	P#Q, Q&larr;MHIGH;	P-Q, Q&larr;AINC, GOTO[.+2,ALU#0];	FRZBALUBC, F2[3];	*SCOPE TRIGGER FOR ADDR=RLOOK IS F2[3]	Q&larr;P+Q, DGOTO[KRRANM,ALU&lt;0];	ADDR&larr;Q, CALL[.+3];	DGOTO[KLOOP];	P&larr;COUNT, CALL[MCYCLE];	Q&larr;MDR, P&larr;DATA;	P&larr;P#Q, Q&larr;MASK, CALL[PQZT];	*TOP 36 BITS WRONG	Q&larr;MDRL, P&larr;DATAL, DGOTO[RGEN];	P&larr;P#Q, Q&larr;MASKL, CALL[PQZT];	*LOW 4 BITS WRONG</pre>
  </body>
</html>
