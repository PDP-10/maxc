<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>File [Indigo]&lt;Maxc>maxc12diag.dm!1>dgmb.mc</title>
  </head>
  <body>
    <pre>
ER[DGMB];	*SECOND HALF OF MEMORY DIAGNOSTIC*NOW TEST OUT THE REF'S USING BOTH FORCED USER AND NOT FORCED SETTINGS*OF XCT0, XCT1, XCT2, AND XCT3 AND WITH THE MAP LOADED WITH THE COMPLEMENT*OF THE ADDRESS PASSED TO TMVAT AND WITH BOTH LEGAL AND ILLEGAL SETTINGS*OF THE ACCESS PERMISSION BITS.TREFS:	CALL[AINI], CLEARF[-1S]; *INITIALIZE ADDRESS TO MLOW*CALL SUBROUTINE TO LOOP OVER 80 VALUES OF DATA AT THE CURRENT ADDRESS.TREF0:	CALL[REFCON];	CALL[AGEN], P&larr;LADR; *LOOP THRU AC ADDRESSES	P-Q;	GOTO[TREF0,ALU&gt;=0];TREF1:	CALL[REFCON];	CALL[AGEN1], Q&larr;LADR;	GOTO[TREF1,ALU&gt;=0];	GOTO[TSTOP];REFCON:	CALL[DINIS1];		*INITIALIZE DATA TO 1	CALL[SREF], CLEARF[-1S]; *TEST ALL THE REFS AT THIS ADDRESS AND DATA	CALL[BDADV];		*CYCLE THE DATA	GOTO[.-2,Q EVEN];	*LOOP TO TRY 40 VALUES OF DATA	CALL[DINIS0];		*INITIALIZE DATA TO -2	CALL[SREF];	CALL[BDADV];	GOTO[.-2,ALU&lt;0];	RETURN;SREF:	P&larr;MHIGH, Q&larr;LADR;	Q&larr;P AND NOT Q, MAPVA&larr;Q, CALL[Q33];	MAP&larr;Q, SETF[CUM], PQ RCY [33]; *MON. MAP ENTRY&larr; COMPLEMENT OF PG. NO.	Q&larr;P, P&larr;LADR, BAMASK[11];	RTEMP&larr;P OR Q, Q&larr;RP&amp;WP&amp;XP; *RTEMP&larr; WHAT MAR SHOULD BE AFTER REF	MAP&larr;Q, LTEMP&larr;P, CLEARF[-1S]; *700000 (NO ACCESS AND PG 0) TO USER MAP	P&larr;LADR;	MAPVA&larr;P;	GOTO[TREFAC,G=1], Q&larr;(MAP) U (RP&amp;WP&amp;XP);*FIRST CHECK EACH OF THE REFS IN MONITOR MODE WITH THE APPROPRIATE MAP ACCESS*BIT SET TO 1 (PREVENTING ACCESS TO THE PAGE).	NONE OF THESE REFS SHOULD*ACTIVATE THE MEMORY INTERFACE.	MDR&larr;NULL, P&larr;RTEMP;	WRITE&larr;P;		*PUT A KNOWN VALUE IN MEMORY SO THAT WE CAN				*CHECK LATER TO FIND OUT IF THE WRITE IMPROPERLY				*TOOK PLACE	Q&larr;MAP;	Q&larr;(NOT Q) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (WP);	MAP&larr;Q, P&larr;LADR;	MAPVA&larr;P;IWREF:	WREF, MDR&larr;SDATA, CALL[CBRK,G=1], INHINT; *MAPVA&larr; INCONSISTENTLY				*YIELDED G=0 EARLIER BUT NOW G=1	P&larr;MDRL&larr;SDATAL, CALL[CBRK,G=0];	*WREF ILLEGAL SO G SHOULD BE 1	RTEMP1&larr;P, CALL[CBRK,H=1], SETSF[CUM&amp;H]; *NOT XCTI#0 SO H SHOULD BE 0	CALL[CBRK,H=1];	 *CUM SHOULD BE 0 SINCE UM=0 AND XCTI=0	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP]; *MEMORY ADDRESS INCORRECT	P&larr;LADR, SETF[XCTN];	MAPVA&larr;P;IWDXK:	WREFDXK, CALL[CBRK,G=1];	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=1];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	MDRL&larr;SDATAL, P&larr;LADR, CALL[CBRK,G=0];*CHECK RMWREF ILLEGAL DUE TO WP=0	MAPVA&larr;P;IRMWREFA: RMWREFDXK, INHINT, MDR&larr;MHIGH, CALL[CBRK,G=1];	CALL[IRFCHK];	P&larr;LADR;	MAPVA&larr;P;	RMWREF, INHINT, MDR&larr;MHIGH, CALL[CBRK,G=1];	CALL[IRFCHK];	Q&larr;MAP, CLEARF[-1S];	Q&larr;(NOT Q) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP);	P&larr;LADR, MAP&larr;Q;	MAPVA&larr;P;IIREF:	IREF, MDR&larr;MHIGH, CALL[CBRK,G=1]; *MAPVA&larr; SCREWED UP	CALL[IRFCHK];		*MHIGH IS USED TO TEST WHETHER READ WRONGLY				*TAKES PLACEIRREF:	RREF, MDR&larr;MHIGH, CALL[CBRK,G=1];	CALL[IRFCHK];*CHECK RMWREF ILLEGAL DUE TO RP=0IRMWREF: MDR&larr;MHIGH, RMWREF, INHINT, CALL[CBRK,G=1];	CALL[IRFCHK];	SETF[XCTN], P&larr;LADR;	MAPVA&larr;P;	RMWREFDXK, MDR&larr;MHIGH, CALL[CBRK,G=1];	CALL[IRFCHK];	Q&larr;MAP;	Q&larr;(NOT Q) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (XP);	MAP&larr;Q;IXREF:	XREF, MDR&larr;MHIGH, CALL[CBRK,G=1];	CALL[IRFCHK];*NOW TEST LEGAL MONITOR MODE REFERENCES	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (WP);	Q&larr;NOT Q;		*PERMIT ONLY WRITES	MAP&larr;Q, SETF[CUM&amp;NXCT3], P&larr;LADR; *NOW PERMITTING ONLY MONITOR WRITES	MAPVA&larr;P;*TEST WREF WITH UM=G=H=WP=0, CUM=XCT0=XCT1=XCT2=RP=XP=1WREFM:	WREF, MDR&larr;SDATA, INHINT, CALL[CBRK,G=1];	CALL[CBRK,G=1], MDRL&larr;SDATAL; *WREF SHOULD SUCCEED SINCE G=0 BEFORE				*AND WP=0 IN MAP	CALL[CBRK,H=1], SETSF[CUM&amp;H]; *XCT3=0 SO H SHOULD BE 0	CALL[CBRK,H=1];	 *CUM SHOULD BE 0 SINCE UM=0 AND XCT3=0	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	*MAR SHOULD BE [Q]*NOW TEST READS BACK WITH EACH OF THE FOUR REFS THAT READ	CLEARF[-1S], MDR&larr;NULL, CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP);	Q&larr;NOT Q;		*ONLY READ ACCESS PERMITTED	MAP&larr;Q, SETF[CUM&amp;NXCT0], P&larr;LADR, CALL[RETN];	MAPVA&larr;P;IREFM:	IREF, CALL[CBRK,G=1];	*[P]#AC REF	CALL[MRCHK];	SETF[CUM&amp;NXCT1];	MAPVA&larr;P;RREFM:	RREF, CALL[CBRK,G=1];	*[P]#AC REF	CALL[MRCHK];	SETF[CUM&amp;XCTN];	MAPVA&larr;P;RDXKM:	RREFDXK, CALL[CBRK,G=1];	CALL[MRCHK];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP&amp;WP);	Q&larr;NOT Q;	MAP&larr;Q, P&larr;LADR, SETF[CUM&amp;NXCT1];	MAPVA&larr;P;RMWREFM: RMWREF, CALL[CBRK,G=1], INHINT;	CALL[MRCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	SETF[CUM&amp;XCTN], P&larr;LADR;	MAPVA&larr;P;RMWDXKM: RMWREFDXK, INHINT, CALL[CBRK,G=1];	CALL[MRCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (XP);	Q&larr;NOT Q;	MAP&larr;Q, P&larr;LADR;	SETF[CUM&amp;XCTN];	MAPVA&larr;P;XREFM:	XREF, CALL[CBRK,G=1];	CALL[MRCHK];*NOW CHECK LEGAL WRITE AND READS WITH XCTI=1 AND CFM=1 (SHOULD GET SAME RESULT*AS MONITOR MODE REFERENCES ABOVE)	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (WP);	Q&larr;NOT Q;	MAP&larr;Q, SETF[CFM&amp;CUM&amp;XCT3], P&larr;LADR;	MAPVA&larr;P;WREFCFM: WREF, MDR&larr;SDATA, INHINT, CALL[CBRK,G=1];	CALL[CBRK,G=1], MDRL&larr;SDATAL;	CALL[CBRK,H=0], SETSF[CUM&amp;H];	CALL[CBRK,H=1];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	CLEARF[-1S], MDR&larr;NULL, CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP);	Q&larr;NOT Q;	MAP&larr;Q, SETF[CFM&amp;CUM&amp;XCT0], P&larr;LADR;	MAPVA&larr;P;IREFCFM: IREF, CALL[CBRK,G=1];	CALL[CFMCHK];	SETF[CFM&amp;CUM&amp;XCT1];	MAPVA&larr;P;RREFCFM: RREF, CALL[CBRK,G=1];	CALL[CFMCHK];	SETF[CFM&amp;CUM&amp;XCTN];	MAPVA&larr;P;RDXKCFM: RREFDXK, CALL[CBRK,G=1];	CALL[MRCHK];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP&amp;WP);	Q&larr;NOT Q;	MAP&larr;Q, P&larr;LADR, SETF[CFM&amp;CUM&amp;XCT1];	MAPVA&larr;P;RMWREFCFM: RMWREF, INHINT, CALL[CBRK,G=1];	CALL[CFMCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	SETF[CFM&amp;CUM&amp;XCTN], P&larr;LADR, CALL[RETN];	MAPVA&larr;P;RMWDXKCFM: RMWREFDXK, INHINT, CALL[CBRK,G=1];	CALL[MRCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (XP);	Q&larr;NOT Q;	MAP&larr;Q, P&larr;LADR, SETF[CFM&amp;CUM&amp;XCTN];	MAPVA&larr;P;XREFCFM: XREF, CALL[CBRK,G=1];	CALL[MRCHK];*NOW CHECK A LEGAL WRITE AND LEGAL READS IN EACH OF THREE FORCED USER MODES	CLEARF[-1S], P&larr;LADR, CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP); *TURN-OFF ALL ACCESS TO MONITOR MAP ENTRY	SETF[CUM&amp;H], MAP&larr;Q, CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (WP);	Q&larr;NOT Q;	MAP&larr;Q, CLEARF[-1S], P&larr;LADR; *PERMIT WRITE ACCESS TO USER MAP ENTRY	SETF[XCT3];	MAPVA&larr;P;	WREF, MDR&larr;SDATA, CALL[CBRK,G=1], INHINT; *NOT ACWREFFU:	CALL[CBRK,G=1], MDRL&larr;SDATAL;	CALL[CBRK,H=0], SETSF[CUM&amp;H]; *SHOULD BE TO USER MODE	CALL[CBRK,H=0];	P&larr;MAR, Q&larr;LTEMP, CALL[PQCOMP]; *MAR SHOULD BE [Q]*NOW TEST THE READS BACK	CLEARF[-1S], MDR&larr;NULL;	SETF[CUM&amp;H], CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP);	Q&larr;NOT Q, SETF[XCT0];	MAP&larr;Q, CLEARF[CUM], P&larr;LADR;	MAPVA&larr;P;IREFFU:	IREF, CALL[CBRK,G=1];	CALL[FURCHK];	SETF[CUM&amp;H], CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP&amp;WP);	Q&larr;NOT Q;	MAP&larr;Q, P&larr;LADR, SETF[XCT1];	MAPVA&larr;P;RMWREFFU: RMWREF, CALL[CBRK,G=1], INHINT;	CALL[FURCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	CLEARF[-1S], P&larr;LADR;	SETF[XCT1];	MAPVA&larr;P;RREFFU:	RREF, CALL[CBRK,G=1];	CALL[FURCHK];*THERE IS NO XREF FU SINCE ALL XCT'S GO TO MONITOR MODE*NOW TEST NORMAL USER REF'S	P&larr;MAP;	Q&larr;RP&amp;WP&amp;XP;	MAP&larr;Q, SETF[CUM], Q&larr;P AND NOT Q;	Q&larr;(Q) U (NWP);	MAP&larr;Q, CLEARF[-1S], P&larr;LADR;	*PERMIT ONLY WRITES	SETF[UM];	MAPVA&larr;P;WREFU:	WREF, CALL[CBRK,G=1], MDR&larr;SDATA, INHINT;	CALL[CBRK,G=1], MDRL&larr;SDATAL;	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=0];	P&larr;MAR, Q&larr;RTEMP, CLEARF[-1S], CALL[PQCOMP];*NOW TEST NORMAL USER READ REFS	SETF[CUM&amp;H], MDR&larr;NULL, CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP);	Q&larr;NOT Q, SETF[UM];	MAP&larr;Q, CLEARF[CUM], P&larr;LADR;	MAPVA&larr;P;IREFU:	IREF, CALL[CBRK,G=1];	*NOT TO AC	CALL[URCHK];	SETF[UM];	MAPVA&larr;P;RREFU:	RREF, CALL[CBRK,G=1];	CALL[URCHK];	SETF[CUM&amp;H], CALL[RETN];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (RP&amp;WP);	Q&larr;NOT Q;	MAP&larr;Q, CLEARF[-1S], P&larr;LADR;	SETF[UM];	MAPVA&larr;P;RMWREFU: RMWREF, INHINT, CALL[CBRK,G=1];	CALL[URCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	SETF[UM];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	*WRESTART SMASHED MAR	MAPVA&larr;SADR, ACFS;RMWDXKU: RMWREFDXK, INHINT, CALL[CBRK,G=1];	CALL[URCHK];	Q&larr;NOT Q, P&larr;SDATAL, CALL[NDGEN];	SETF[UM];	P&larr;MAR, Q&larr;RTEMP, SETF[CUM&amp;H], CALL[PQCOMP];	Q&larr;(MAP) U (RP&amp;WP&amp;XP);	Q&larr;(NOT Q) U (XP);	Q&larr;NOT Q;	MAP&larr;Q, CLEARF[-1S], P&larr;LADR;	SETF[UM];	MAPVA&larr;P;XREFU:	XREF, CALL[CBRK,G=1];	CALL[URCHK];	RETURN;		 ******FINISH THIS LATER*CHECK AFTERMATH OF AC REFERENCE IN MONITOR MODEAMRCHK:	CALL[CBRK,H=1], SETSF[CUM&amp;H];AMCHK1:	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	CALL[CBRK,H=1], P&larr;RP&amp;WP&amp;XP;	Q&larr;MDR, CALL[PQCOMP];	CLEARF[-1S], P&larr;LADR, RETURN;*CHECK AFTERMATH OF AC REF IN MON MODE WITH BOTH XCTI AND CFM SETACFMCHK: CALL[CBRK,H=0], SETSF[CUM&amp;H];	GOTO[AMCHK1];*CHECK AFTERMATH OF AC REF IN MON MODE FORCED TO USER MODE BY AN XCTIAFURCHK: CALL[CBRK,H=0], SETSF[CUM&amp;H];	P&larr;MAR, Q&larr;LTEMP, CALL[PQCOMP];	CALL[CBRK,H=0], P&larr;XCTN;	Q&larr;MDR, CALL[PQCOMP];	CLEARF[-1S], P&larr;LADR, RETURN;*CHECK AFTERMATH OF USER MODE AC REFSAURCHK:	CALL[CBRK,H=1], SETSF[CUM&amp;H]; *NOT A FORCED USER REF	P&larr;MAR, Q&larr;LTEMP, CALL[PQCOMP];	*MEMORY ADDRESS NOT FROM USER MAP	CALL[CBRK,H=0], P&larr;MHIGH;	*CUM SHOULD BE 1 SINCE UM WAS 1	Q&larr;MDR, CALL[PQCOMP];	*MDR SHOULDN'T HAVE CHANGED SINCE AC REF	CLEARF[-1S], P&larr;LADR;	SETF[UM];	MAPVA&larr;P, RETURN;*TEST OUT THE REF'S ON AC REFERENCES.  G=DON'T CARE AFTER TO REF TO AC*SINCE COMPLETE ACCESS ALLOWED TO AC'S SO THAT MAP PROTECTION DOESN'T*APPLY.	HOWEVER, G=ACCESS TO PAGE SAME AS NON-AC REF WOULD BE MORE*GENERAL.  H=FORCED USER MODE.  CUM MUST BE SET PER UM/XCTI.*MAR MUST BE LOADED FROM 12 BITS OF MAP ENTRY SAME AS NON-AC REF.*MEMORY INTERFACE MUST NOT BE STARTED WHICH MEANS THAT MDR MUST NOT*BE CLOBBERED ON READS AND MEMORY NOT CLOBBERED BY WRITESTREFAC:	MDR&larr;NULL, P&larr;RTEMP;	*INITIALIZE THE MEMORY TO A VALUE				*SO THAT WE CAN READ IT BACK LATER AND				*CHECK FOR ITS GETTING CLOBBERED	WRITE&larr;P;	Q&larr;MAP;	Q&larr;(NOT Q) U (RP&amp;WP&amp;XP);	Q&larr;NOT Q;	MAP&larr;Q, SETF[CUM], CALL[RETN];	*ALLOW COMPLETE ACCESS TO MONITOR PAGE 0				*SINCE THIS IS WORST CASE FOR LETTING THE				*MEMORY INTERFACE START INCORRECTLY	Q&larr;MAP;	Q&larr;(NOT Q) U (RP&amp;WP&amp;XP);	Q&larr;NOT Q, MDRL&larr;-1S;	MAP&larr;Q, SETF[CUM&amp;NXCT3], P&larr;LADR, CALL[RETN]; *COMPLETE ACCESS TO USER PAGE 0 ALSO	MAPVA&larr;P;ACWM:	WREF, MDR&larr;A1, CALL[CBRK,G=0]; *SHOULD NEVER BE G=0 HERE	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=1];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP]; *MAR # [Q]	CLEARF[-1S], CALL[QLCY6];	*GIVE MEMORY PLENTY OF TIME TO WRITE				*IF IT WANTS TO	P&larr;LADR, SETF[CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACWDXKM: WREFDXK, CALL[CBRK,G=0];	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=1];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	CLEARF[-1S];	P&larr;LADR, SETF[CUM&amp;NXCT0], CALL[RETN];	MAPVA&larr;P;ACIM:	IREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP; *AC REF'S LEAVE G=1	CALL[AMRCHK];	SETF[CUM&amp;NXCT1], CALL[RETN];	MAPVA&larr;P;ACRM:	RREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP;	CALL[AMRCHK];	SETF[CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACRDXKM: RREFDXK, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP;	CALL[AMRCHK];	SETF[CUM&amp;NXCT1], CALL[RETN];	MAPVA&larr;P;ACRMWM:	RMWREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP, INHINT;	CALL[AMRCHK];	SETF[CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACRMWDXKM: RMWREFDXK, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP, INHINT;	CALL[AMRCHK];	SETF[CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACXM:	XREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP;	CALL[AMRCHK];*NOW CHECK A WRITE AND READS WITH BOTH CFM AND XCTI SET	P&larr;LADR, SETF[CFM&amp;CUM&amp;XCT3], CALL[RETN];	MAPVA&larr;P;ACWCFM:	WREF, MDR&larr;A1, CALL[CBRK,G=0];	CALL[CBRK,H=0], SETSF[CUM&amp;H];	CALL[CBRK,H=1];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	CLEARF[-1S];	P&larr;LADR, SETF[CFM&amp;CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACWDXKCFM: WREFDXK, CALL[CBRK,G=0];	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=1];	P&larr;MAR, Q&larr;RTEMP, CALL[PQCOMP];	CLEARF[-1S];	P&larr;LADR, SETF[CFM&amp;CUM&amp;XCT0], CALL[RETN];	MAPVA&larr;P;ACICFM:	IREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP;	CALL[ACFMCHK];	SETF[CFM&amp;CUM&amp;XCT1], CALL[RETN];	MAPVA&larr;P;ACRCFM:	RREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP;	CALL[ACFMCHK];	SETF[CFM&amp;CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACRDXKCFM: RREFDXK, MDR&larr;RP&amp;WP&amp;XP, CALL[CBRK,G=0];	CALL[AMRCHK];	SETF[CFM&amp;CUM&amp;XCT1], CALL[RETN];	MAPVA&larr;P;ACRMWCFM: RMWREF, CALL[CBRK,G=0], INHINT, MDR&larr;RP&amp;WP&amp;XP;	CALL[ACFMCHK];	SETF[CFM&amp;CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACRMWDXKCFM: RMWREFDXK, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP, INHINT;	CALL[AMRCHK];	SETF[CFM&amp;CUM&amp;XCTN], CALL[RETN];	MAPVA&larr;P;ACXCFM:	XREF, CALL[CBRK,G=0], MDR&larr;RP&amp;WP&amp;XP;	CALL[AMRCHK];*NOW CHECK A WRITE AND READS WHICH FORCE USER MODE	SETF[XCT3], CALL[RETN];	MAPVA&larr;P;ACWFU:	WREF, MDR&larr;A1, CALL[CBRK,G=0];	CALL[CBRK,H=0], SETSF[CUM&amp;H];	CALL[CBRK,H=0];	 *XCT3 DIDN'T SET CUM=1	P&larr;MAR, Q&larr;LTEMP, CALL[PQCOMP];	CLEARF[-1S], CALL[QLCY6];	P&larr;LADR, SETF[XCT0], CALL[RETN];	MAPVA&larr;P;ACIFU:	IREF, CALL[CBRK,G=0], MDR&larr;XCTN;	CALL[AFURCHK];	SETF[XCT1], CALL[RETN];	MAPVA&larr;P;ACRFU:	RREF, MDR&larr;XCTN, CALL[CBRK,G=0];	CALL[AFURCHK];	SETF[XCT1], CALL[RETN];	MAPVA&larr;P;ACRMWFU: RMWREF, MDR&larr;XCTN, CALL[CBRK,G=0], INHINT;	CALL[AFURCHK];*NOW CHECK A WRITE AND READS IN USER MODE	SETF[UM];	MAPVA&larr;P;ACWU:	WREF, MDR&larr;A1, CALL[CBRK,G=0];	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=0];	CLEARF[-1S], P&larr;MAR, Q&larr;LTEMP, CALL[PQCOMP];	SETF[UM], P&larr;LADR;	MAPVA&larr;P;ACWDXKU: WREFDXK, MDR&larr;A1, CALL[CBRK,G=0], INHINT;	CALL[CBRK,H=1], SETSF[CUM&amp;H];	CALL[CBRK,H=0];	CLEARF[-1S], P&larr;MAR, Q&larr;LTEMP, CALL[PQCOMP];	SETF[UM], P&larr;LADR;	MAPVA&larr;P;ACIU:	IREF, CALL[CBRK,G=0], MDR&larr;MHIGH;	CALL[AURCHK];ACRU:	RREF, CALL[CBRK,G=0], MDR&larr;MHIGH;	CALL[AURCHK];ACRDXKU: RREFDXK, MDR&larr;MHIGH, CALL[CBRK,G=0];	CALL[AURCHK];ACRMWU:	RMWREF, CALL[CBRK,G=0], MDR&larr;MHIGH, INHINT;	CALL[AURCHK];ACRMWDXKU: RMWREFDXK, CALL[CBRK,G=0], MDR&larr;MHIGH;	CALL[AURCHK];ACXU:	XREF, CALL[CBRK,G=0], MDR&larr;MHIGH;	CALL[AURCHK];*NOW MAKE SURE MEMORY AC IS STILL 0 AFTER ALL THIS MACHINATION WHEN THE*MEMORY INTERFACE WAS PRESUMED INACTIVE	P&larr;RTEMP;	READ&larr;P, CALL[RETN];	Q&larr;MDR, CALL[QZT];	*MEMORY CLOBBERED BY AC REFERENCE	RETURN;TSTOP:	GOTO[MCYCLE];		******TEMPORARY END OF DIAG.	IM[ILC,ADD[IP[ILC],-1]]; *BACK UP PC IN CASE MORE DIAG ARE BEING				*ASSEMBLED</pre>
  </body>
</html>
